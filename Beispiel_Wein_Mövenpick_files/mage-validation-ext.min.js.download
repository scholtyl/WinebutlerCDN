define(['jquery','mage/translate'],function($,$t){'use strict';return function(mageValidation){$.extend(true,$.validator.messages,{step:$.validator.format($t('Please enter a multiple of {0}.'))});$.validator.addMethod('validate-file-type',function(value,elem,param){const formats=param.split(',');const files=Array.from(elem.files);let valid=true;files.forEach(({type})=>{if(!formats.includes(type)){valid=false;}});this.validateFileTypeMsg=$t('Disallowed file type. Allowed types: %1').replace('%1',param);return valid;},function(){return this.validateFileTypeMsg;});$.validator.addMethod('validate-filesize',function(value,elem,param){const files=Array.from(elem.files);let valid=true;files.forEach(({size})=>{if(size>param){valid=false;}});this.validateFileSizeMsg=$t('The file size should not exceed %1MB.').replace('%1',param / 1024 / 1024);return valid;},function(){return this.validateFileSizeMsg;});$.validator.addMethod('validate-postbox',function(value,elem,param){if(value?.trim()?.length){return true;}
const isPostboxElement=elem.getAttribute('name').includes('postbox');if(isPostboxElement){const streetSelector=(typeof param==='string'&&param.length)?param:'#street_1';const streetInput=document.querySelector(streetSelector);return!!streetInput?.value?.trim()?.length;}
const postboxInput=document.querySelector('#postbox');return!!postboxInput?.value?.trim()?.length;},function(){return $t('This is a required field, please enter at least the street or the postbox.')});};});