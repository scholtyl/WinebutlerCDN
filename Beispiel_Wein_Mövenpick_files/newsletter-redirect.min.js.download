define(['jquery','mage/validation'],function($){'use strict';function buildUrl(target,email){var url=new URL(target||'/',window.location.origin);if(email){url.searchParams.set('userId',email);}
return url.toString();}
return function(config,element){var $form=$(element);$form.off('submit.newsletterRedirect');$form.on('submit.newsletterRedirect',function(e){e.preventDefault();if(!$form.data('mageValidation')){$form.validation();}
var isValid=$form.validation('isValid');if(!isValid){$form.find("input[name='email']").trigger('focus');return;}
var email=($form.find("input[name='email']").val()||'').trim();window.location.assign(buildUrl(config.redirectPath,email));});};});