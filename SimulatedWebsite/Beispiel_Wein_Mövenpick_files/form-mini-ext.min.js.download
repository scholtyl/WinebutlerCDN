define(['jquery'],function($){'use strict';return function(quickSearch){$.widget('smileEs.quickSearch',quickSearch,{_create:function(){var self=this;this._super();this.element.off('blur');this._blur();this._resetFormOnOuterClick=this._resetFormOnOuterClick.bind(this);$('body').on('click',this._resetFormOnOuterClick);this.isTouchDevice=this._isTouchDevice();},_resetFormOnOuterClick:function(event){if(!$(event.target).closest(this.autoComplete).length){this._resetResponseList(true);this.autoComplete.hide();}},_isTouchDevice(){return('ontouchstart'in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);},_getSectionHeader:function(type,data){var title='';var header=$('<dl class="autocomplete-list"></dl>');if(type!==undefined){header.addClass(type);title=this._getSectionTitle(type,data);header.append(title);}
return header;},_getSectionTitle:function(type,data){var title='';if(this.titleRenderers&&this.titleRenderers[type]){title=$('<dt class="autocomplete-list-title title-'+
type+'">'+
this.titleRenderers[type].render(data)+'</dt>');}else if(this.options.templates&&this.options.templates[type].title){title=$('<dt class="autocomplete-list-title title-'+
type+'">'+
this.options.templates[type].title+'</dt>');}
return title;},_validateElement:function(event){if(this.responseList.selected){return this._super(event);}
this.searchForm.trigger('submit');},_resetResponseList:function(all){this._super(all);var minWidth=all?'':parseInt(this.element.outerWidth(),10);this.autoComplete.css({minWidth:minWidth,width:'',});this.searchForm.toggleClass('active-popup',Boolean(!all&&this.responseList.indexList?.length));$('html').toggleClass('autocomplete-dropdown-visible',Boolean(!all&&this.responseList.indexList?.length));},_blur:function(){this.element.on('blur',$.proxy(function(e){if(!this.searchLabel.hasClass('active')){return;}
setTimeout($.proxy(function(){if(this.isTouchDevice){this.setActiveState(true);return;}
if(this.autoComplete.is(':hidden')){this.setActiveState(false);}else{this.element.trigger('focus');}
this.autoComplete.hide();$('#search').trigger('blur');this._updateAriaHasPopup(false);},this),250);},this));},});return $.smileEs.quickSearch;};});