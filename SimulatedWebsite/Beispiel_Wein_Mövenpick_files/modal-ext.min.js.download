define(['jquery'],function($){'use strict';return function(mageModal){$.widget('mage.modal',mageModal,{_create:function(){this._super();this._boundFocusHandler=this._handleFocus.bind(this);},_setActive:function(){this._super();document.addEventListener('focus',this._boundFocusHandler,true);$('body').trigger('modal:open');},_unsetActive:function(){this._super();document.removeEventListener('focus',this._boundFocusHandler,true);$('body').trigger('modal:close');},_handleFocus:function(event){const modalElement=this.modal[0];const focusElement=this.modal.find(this.options.focus);if(!modalElement.contains(document.activeElement)){focusElement.focus();}},_createOverlay:function(){if(this._canAppplyNoScroll()){const $currentTopOffset=window.scrollY;$('body').addClass('modal-no-scroll').css({top:-$currentTopOffset});}
this._super();},_destroyOverlay:function(){this._super();if(this._canAppplyNoScroll()){const $currentTopOffset=$('body').css('top');$('body').removeClass('modal-no-scroll').css({top:''});window.scrollTo(0,parseInt($currentTopOffset||'0',10)*-1);}},_canAppplyNoScroll:function(){return!($('.minicart-offcanvas-open').length||$('.navigation-offcanvas-open').length||this._getVisibleCount());},});return $.mage.modal;};});