define(['jquery',],function($){'use strict';return function(sharedComponent){return sharedComponent.extend({$body:null,initialize:function(){this._super();this.$body=$('body');return this;},pushAddToCartDataLayer:function(data){const dataLayer=this.getDataLayerObject();this.$body.trigger("mpGa4ItemAddToCart",[data,dataLayer]);dataLayer.push({'event':'add_to_cart','ecommerce':{'currency':this.config.currency,'items':data,'item_list_name':this.itemListName,'item_list_id':this.itemListId},'_clear':true});},pushAddRemoveItemDataLayer:function(data){if(_.isObject(data)&&_.has(data,'cart_items')){var cartGenericLayer={};var dataLayer=this.getDataLayerObject();var self=this;_.each(data.cart_items,function(cartItem){if(_.has(cartItem,'event')){if(_.has(cartItem,'ecommerce')){cartItem.ecommerce.currency=self.config.currency;}
if(cartItem.event==='add_to_cart'){var itemsAdded=self.processData(cartItem.ecommerce.items);$("body").trigger("mpGa4ItemAddToCart",[itemsAdded,dataLayer]);cartGenericLayer.add={'products':itemsAdded};if(self.itemListId){cartItem.ecommerce.item_list_id=self.itemListId;}
if(self.itemListName){cartItem.ecommerce.item_list_name=self.itemListName;}}
if(cartItem.event==='remove_from_cart'){var itemsRemoved=self.processData(cartItem.ecommerce.items);$("body").trigger("mpGa4ItemRemoveFromCart",[itemsRemoved,dataLayer]);cartGenericLayer.remove={'products':itemsRemoved};if(self.itemListId){cartItem.ecommerce.item_list_id=self.itemListId;}
if(self.itemListName){cartItem.ecommerce.item_list_name=self.itemListName;}}}
cartItem._clear=true;dataLayer.push(cartItem);});}},});};});